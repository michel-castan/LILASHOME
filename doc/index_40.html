<html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>LILAS-V4</title><!--Généré dynamiquement par PubliTool 2009--><link href="index_2.css" rel="stylesheet"><script src="index_3.js" type="text/javascript">
   </script></head><body><div xmlns:url="http://whatever/java/java.net.URLEncoder" class="zoneTitre"><table class="zoneTitre" width="100%"><tr class="zoneTitre"><td class="colTitreLogo"><embed src="index_4.svg" type="image/svg+xml"></embed></td><td class="colTitreTxt">LILAS-V4</td></tr></table></div><div id="tocFixe"><ul><li class="niv0"><a href="index.html" onClick="return chargerURLavecHistorique(this)">LILAS-V4</a></li><li class="niv1"><a href="index_6.html" onClick="return chargerURLavecHistorique(this)">1 Installation</a></li><li class="niv1"><a href="index_7.html" onClick="return chargerURLavecHistorique(this)">2 Quick start tutorial</a></li><li class="niv1"><a href="index_19.html" onClick="return chargerURLavecHistorique(this)">3 Launch command</a></li><li class="niv1"><a href="index_20.html" onClick="return chargerURLavecHistorique(this)">4 Configuration file</a></li><li class="niv1"><a href="index_21.html" onClick="return chargerURLavecHistorique(this)">5 Lilas programming</a></li><li class="niv2"><a href="index_22.html" onClick="return chargerURLavecHistorique(this)">5.1 lilas.base</a></li><li class="niv2"><a href="index_26.html" onClick="return chargerURLavecHistorique(this)">5.2 lilas.awt</a></li><li class="niv2sel"><a href="index_40.html" onClick="return chargerURLavecHistorique(this)">5.3 lilas.script</a></li><li class="niv3"><a href="index_41.html" onClick="return chargerURLavecHistorique(this)">5.3.1 waitStable</a></li><li class="niv3"><a href="index_42.html" onClick="return chargerURLavecHistorique(this)">5.3.2 waitD&eacute;lai</a></li><li class="niv3"><a href="index_43.html" onClick="return chargerURLavecHistorique(this)">5.3.3 waitValue</a></li><li class="niv3"><a href="index_44.html" onClick="return chargerURLavecHistorique(this)">5.3.4 while</a></li><li class="niv3"><a href="index_45.html" onClick="return chargerURLavecHistorique(this)">5.3.5 whileValue</a></li><li class="niv3"><a href="index_46.html" onClick="return chargerURLavecHistorique(this)">5.3.6 for</a></li><li class="niv3"><a href="index_47.html" onClick="return chargerURLavecHistorique(this)">5.3.7 if</a></li><li class="niv3"><a href="index_48.html" onClick="return chargerURLavecHistorique(this)">5.3.8 ifValue</a></li><li class="niv3"><a href="index_49.html" onClick="return chargerURLavecHistorique(this)">5.3.9 check</a></li><li class="niv3"><a href="index_50.html" onClick="return chargerURLavecHistorique(this)">5.3.10 next</a></li><li class="niv3"><a href="index_51.html" onClick="return chargerURLavecHistorique(this)">5.3.11 group</a></li><li class="niv3"><a href="index_52.html" onClick="return chargerURLavecHistorique(this)">5.3.12 print</a></li><li class="niv3"><a href="index_53.html" onClick="return chargerURLavecHistorique(this)">5.3.13 load</a></li><li class="niv3"><a href="index_54.html" onClick="return chargerURLavecHistorique(this)">5.3.14 save</a></li><li class="niv3"><a href="index_55.html" onClick="return chargerURLavecHistorique(this)">5.3.15 callMethod</a></li><li class="niv3"><a href="index_56.html" onClick="return chargerURLavecHistorique(this)">5.3.16 clearHistoric</a></li><li class="niv3"><a href="index_57.html" onClick="return chargerURLavecHistorique(this)">5.3.17 setHistoric</a></li><li class="niv3"><a href="index_58.html" onClick="return chargerURLavecHistorique(this)">5.3.18 snapshot</a></li><li class="niv3"><a href="index_59.html" onClick="return chargerURLavecHistorique(this)">5.3.19 exit</a></li><li class="niv2"><a href="index_60.html" onClick="return chargerURLavecHistorique(this)">5.4 lilas.sm</a></li><li class="niv2"><a href="index_61.html" onClick="return chargerURLavecHistorique(this)">5.5 lilas.code</a></li><li class="niv1"><a href="index_64.html" onClick="return chargerURLavecHistorique(this)">6 lilas.bib</a></li><li class="niv1"><a href="index_85.html" onClick="return chargerURLavecHistorique(this)">7 FPGA board</a></li></ul></div><div class="zoneMain"><p class="H2c" xmlns:url="http://whatever/java/java.net.URLEncoder">
   - 5.3 -</p><p class="H2c" xmlns:url="http://whatever/java/java.net.URLEncoder">lilas.script</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">The script element contains a sequence of instructions for interacting with the simulated system.
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">The script element has a "name" attribute for designating the script in the module. The existence 
	of one or more script elements in a module involves the automatic definition of an internal signal module
	equivalent to 
<div style="white-space:pre;font-family:monospace;"><font color="#A020F0">&lt;signal name=</font><font color="#CC6600">"pc"</font> 
        <font color="#A020F0">type=</font><font color="#CC6600">"java.lang.Integer"</font>
        <font color="#A020F0">mode=</font><font color="#CC6600">"internal"</font>
        <font color="#A020F0">sensitive=</font><font color="#CC6600">"true"</font> 
        <font color="#A020F0">init=</font><font color="#CC6600">"-1"</font><font color="#A020F0">/&gt;</font>

</div>
Any declaration of a signal of the same name in a module therefore produce an error.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">It is possible to define a script with parameters. These parameters should be reported in the item "param"
	contained in the definition of the script:
<div style="white-space:pre;font-family:monospace;">  <font color="#A020F0">&lt;script name=</font><font color="#CC6600">"test"</font><font color="#A020F0">&gt;</font>
	<font color="#A020F0">&lt;param&gt;</font>
		<font color="#A020F0">&lt;signal name=</font><font color="#CC6600">"p1"</font> <font color="#A020F0">type=</font><font color="#CC6600">"java.lang.Integer"</font><font color="#A020F0">/&gt;</font>
		<font color="#A020F0">&lt;signal name=</font><font color="#CC6600">"p2"</font> <font color="#A020F0">type=</font><font color="#CC6600">"java.lang.Integer"</font><font color="#A020F0">/&gt;</font>
		<font color="#A020F0">&lt;signal name=</font><font color="#CC6600">"no"</font> <font color="#A020F0">type=</font><font color="#CC6600">"java.lang.Integer"</font><font color="#A020F0">/&gt;</font>
	<font color="#A020F0">&lt;/param&gt;</font>
    <font color="#A020F0">&lt;next signal=</font><font color="#CC6600">"x"</font> <font color="#A020F0">value=</font><font color="#CC6600">"p1"</font><font color="#A020F0">/&gt;</font>
    <font color="#A020F0">&lt;waitStable/&gt;</font>
    <font color="#A020F0">&lt;print&gt;&lt;in signal=</font><font color="#CC6600">"no"</font><font color="#A020F0">/&gt;</font> (<font color="#A020F0">&lt;date/&gt;</font>)<font color="#A020F0">&lt;/print&gt;</font>
    <font color="#A020F0">&lt;check signal=</font><font color="#CC6600">"y"</font> <font color="#A020F0">value=</font><font color="#CC6600">"p2"</font><font color="#A020F0">/&gt;</font>
  <font color="#A020F0">&lt;/script&gt;</font>
</div>


 </p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">
  The call for such a script will be done by the element name of the script:
 <div style="white-space:pre;font-family:monospace;">   <font color="#A020F0">&lt;script name=</font><font color="#CC6600">"main"</font><font color="#A020F0">&gt;</font>
    <font color="#A020F0">&lt;test p1=</font><font color="#CC6600">"9"</font> <font color="#A020F0">p2=</font><font color="#CC6600">"3"</font> <font color="#A020F0">no=</font><font color="#CC6600">"1"</font><font color="#A020F0">/&gt;</font>
    <font color="#A020F0">&lt;test p1=</font><font color="#CC6600">"4"</font> <font color="#A020F0">p2=</font><font color="#CC6600">"2"</font> <font color="#A020F0">no=</font><font color="#CC6600">"2"</font><font color="#A020F0">/&gt;</font>
  <font color="#A020F0">&lt;/script&gt;</font> 
 
</div>
 
 </p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">It is also possible to call Java methods using the item "callMethod", pointing to the various 
 	arguments by the names "arg0" for first, "arg1" for the second, etc. For example&nbsp;:
 <div style="white-space:pre;font-family:monospace;">
    <font color="#A020F0">&lt;script name=</font><font color="#CC6600">"main"</font><font color="#A020F0">&gt;</font>
   	<font color="#A020F0">&lt;callMethod name=</font><font color="#CC6600">"test"</font> <font color="#A020F0">p1=</font><font color="#CC6600">"9"</font> <font color="#A020F0">p2=</font><font color="#CC6600">"3"</font> <font color="#A020F0">no=</font><font color="#CC6600">"1"</font><font color="#A020F0">/&gt;</font>
 	<font color="#A020F0">&lt;callMethod name=</font><font color="#CC6600">"test"</font> <font color="#A020F0">p1=</font><font color="#CC6600">"4"</font> <font color="#A020F0">p2=</font><font color="#CC6600">"2"</font> <font color="#A020F0">no=</font><font color="#CC6600">"2"</font><font color="#A020F0">/&gt;</font>

   <font color="#A020F0">&lt;/script&gt;</font> 
 
   <font color="#A020F0">&lt;code language=</font><font color="#CC6600">"java"</font><font color="#A020F0">&gt;</font>
  <font color="#A020F0">&lt;methods&gt;</font>

 	public static String[] test_paramsNames = { "p1", "p2", "no" }
	public void test(String p1, String p2, String no) throws lilas.base.ExceptionLilas {
		...
	}
 
<font color="#A020F0">&lt;/code&gt;</font>
</div>
 	
 </p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">The script element contains one or more instructions in the following subsections.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">A script element whose name is other than "main" can not be launched at system startup 
	(with the option -script=scriptname) or through a script launch button. Only the script 
	whose name is "main" start automatically when starting the module.
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">The script with the name "exit" is automatically executed when the <i>LILAS</i> system stop. For example, 
	it can be used to program automatic backup memory elements contained in the system:
	
<div style="white-space:pre;font-family:monospace;">
	<font color="#A020F0">&lt;script name=</font><font color="#CC6600">"exit"</font><font color="#A020F0">&gt;</font>
		<font color="#A020F0">&lt;print&gt;</font>On ferme!<font color="#A020F0">&lt;/print&gt;</font>
		<font color="#A020F0">&lt;saveWhenModified memory=</font><font color="#CC6600">"larom.mem"</font> <font color="#A020F0">memInit=</font><font color="#CC6600">"tst.code.logic.memoire.sauvegardeRom"</font><font color="#A020F0">/&gt;</font> 	
		<font color="#A020F0">&lt;print&gt;</font>Save ok<font color="#A020F0">&lt;/print&gt;</font>
	<font color="#A020F0">&lt;/script&gt;</font>
</div>
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">We can create test Junit classes as follows:
<div style="white-space:pre;font-family:monospace;"><font color="#009900">package</font><font color="#0000FF"> arch.ual</font>;

<font color="#009900">import</font><font color="#0000FF"> static org.junit.Assert.*</font>;
<font color="#009900">import</font><font color="#0000FF"> org.junit.Test</font>;

<font color="#009900">public</font> <font color="#009900">class</font> <font color="#0000FF">UALjunit</font> {

	@Test
	<font color="#009900">public</font> <font color="#009900">void</font> <font color="#0000FF">testScr1</font>() {
		assertTrue(Main.junit(<font color="#CC6600">"nomCompletDuModule"</font>, <font color="#CC6600">"scr1"</font>)); <font color="#9A1900">// pour lancer l'ex&eacute;cution du script de nom scr1
</font>		assertTrue(Main.junit(<font color="#CC6600">"nomCompletDuModule"</font>, null)); <font color="#9A1900">// pour lancer l'ex&eacute;cution sans script (autre que main)
</font>	}

}
</div>
</p></div></body></html>